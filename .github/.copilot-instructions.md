You must follow these rules when generating code:

1. Do NOT create helper functions unless:
   - They are explicitly requested, OR
   - They are reused at least twice in the code being written.

2. Prefer Server Actions over API routes/endpoints.
   - Only generate API endpoints if the user explicitly asks for one
     or if a server action is not technically possible.
   - Never scaffold API endpoints that are not needed.

3. NEVER use `any`, `unknown`, or empty `as` casts.
   - Resolve TypeScript errors by refining types, inferring types,
     or restructuring logic—not by weakening the type system.

4. Maintain strict type safety.
   - Use `zod`, `schema validation`, or model types when necessary.
   - Infer types from existing code if possible.
   - Prefer using `ReturnType` / `typeof` / `interface` / `type` unions
     over loose typing.

5. Keep the generated code minimal.
   - No “extra utilities”, abstractions, helpers, factories,
     unless directly required by the user story.
   - Keep the solution direct and readable.

6. Before writing code, silently analyze:
   - Whether a helper is truly needed.
   - Whether a server action is possible (default to yes).
   - How to solve typing without weakening the type safety.

7. The goal:
   - Clean code
   - Strict TypeScript
   - No unused helpers
   - Server-first architecture